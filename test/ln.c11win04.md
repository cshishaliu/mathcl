# 赋值法

## `讲义`

### 赋值法

赋值法是一个非常基本而为人津津乐道的方法, 是处理操作与覆盖问题中 "不能" 的有效手段. 基本想法是通过为对象记上一个标记, 把较为复杂的组合问题转化为一个比较简单的代数运算问题.

染色是赋值的一种特殊且常见的形式, 赋值只有 0 和 1 两种值. 复杂的赋值有时也会用到单位根、黄金分割数等,比较高级, 也不容易想到.

#### 例 1

能否用 1 个 \figurehere 和 15 个 \figurehere 覆盖 $8 \times 8$ 的棋盘? 为什么?

\figurehere

> 间隔染色, 黑白色各 32 个. 而第一个图形的黑白色是奇数个, 第二个图形的黑白色是偶数个.

#### 例 2

能否用 9 个 \figurehere 覆盖 $6 \times 6$ 的棋盘?

\figurehere

> 若 $m \times n$ 的长方形能被若干个题目中的图形覆盖, 则: $8 | mn$. 
>
> 首先 $4 | mn$, 故 $m , n$ 必有偶数, 可以条形染色使黑白数目相等. $L$ 型必盖住 3 黑 1 白或 1 黑 3 白, 故 L 型有偶数个,故 $8 | mn$.

#### 例 3

能否用 7 个 $2 \times 2$ 的和 9 个 $4 \times 1$ 的长方形覆盖 $8 \times 8$ 的国际象棋棋盘?

\figurehere

> 条形染色,奇偶分析.
>
> 或将右上到左下方向第 $2,3,6,7,10,11,14,15$ 条对角线染黑.

#### 例 4

在 $9 \times 9$ 的棋盘的每个小格子中都有 1 只甲虫, 听到哨声后每只甲虫都必须沿对角线方向移动到相邻的格子里, 这样一来有些方格可能会空着. 在听到若干次哨声后, 空着的方格最少有多少个?

> 条形染色, 9 个.

#### 例 5

 能否用 1 个 \figurehere 和 15 个 \figurehere 覆盖 $8 \times 8$ 的棋盘?

\figurehere

> (1) 多重染色 1234, 强调多重染色多用于长条形覆盖;
>
> (2) 或条形染色 + 奇偶分析;
>
> (3) 或奇葩染色: 考虑右上到左下方向的 15 条对角线染黑第 $3,4,7,8,11,12,15$ 条.

#### 例 6

平面上有一个无限大的方格棋盘, 上面摆好了一些棋子, 棋子所在方格恰好组成一个 $3m \times n$ ( $m ,n$ 是正整数) 的矩形. 按下述规则进行游戏, 每一枚棋子都可以沿水平或竖直方向 (即平行于网格线的方向) 越过相邻的棋子, 放进紧挨着这枚相邻棋子的空格里, 并把相邻棋子从棋盘上取走. 证明: 不论怎样走, 棋盘上都不会恰好剩下一枚棋子.

> 123 多重染色. 横向 $1-2-3-1-2-3-1-2- \cdots $. 竖向同样 $1-2-3-1-2-3-1-2-\cdots $. 每操作一步, 各种颜色方格内的棋子总数分别改变奇偶性. 刚开始时三种颜色内的棋子总数分别一样, 所以最后也应该一样.

#### 例 7

在 $6 \times 6 \times 6$ 的正方体盒子中, 最多可以放入多少个 $1\times 1\times 4$ 的小长方体? 要求每个小长方体的面都要与盒子的某个面平行. 

\figurehere

> 把 $2 \times 2 \times 2$ 的看成一块, 整个图形有 27 块. 立体间隔染色, 保证黑周围全白, 白周围全黑. 设黑的多, 则共 13 块染白的, 每个小长方体用 2 个白格. 故最多 52 个小长方体, 52 构造显然.

#### 例 8

用若干个 $1 \times 6$ 和 $1\times 7$ 的小长方形覆盖 $11\times 12$ 的大长方形, 最少要用两种小长方形共多少个?

\figurehere

> 12 个 $1 \times 7$ 和 8 个 $1 \times 6$ 显然可以, 共 20 个.
>
> 染黑 $(1,5), (2,4), \cdots, (5,1)$; $(1,12), (2,11), \cdots, (11,2)$; $(8,12), (9,11), (10,10), (11,9)$ 共 20 个格子, 每个小长方形至多盖住其中之一, 最少要 20 个.
>
> 注: 可以不用染色, 拿不定方程来解.

#### 例 9

$8 \times 8$ 的方格中任意写上 64 个自然数, 每次可以从中选出一个 $3 \times 3$ 或 $4 \times 4$ 的长方形, 令其中的所有数都加上 1. 求证: 无论开始时 64 个数是几, 经过有限次变化, 都不能令 64 个数都变为 10的倍数.

\figurehere

> 第 2、3、6、7 行的第 1、2、4、5、7、8 格均染黑, $3 \times 3$ 或 $4 \times 4$ 必盖住偶数个黑格, 这样如果开始 24 黑格数和为奇数则永远和为奇数, 不可能全变为 10 的倍数.

#### 例 10

如图, 在一个无限大的棋盘的左下角有一个六个格子的 "监狱", 里面关押着 3 只变形虫. 现在, 3 只变形虫想 "越狱", 但是变形虫无法移动, 只能通过变形来改变自身的位置. 变形方式如下: 如果一只变形虫它的右边和上边的格子都是空的, 则可以由
\figurehere 变为 \figurehere, 如果监狱的 6 个格子中没有任何虫子才算越狱成功, 问: 这 3 只虫子能成功越狱吗?

\figurehere

> 沿左上到右下每条对角线标数, 第一条标 1, 第二条全标 $\dfrac 12$, 第三条全标 $\dfrac 14$, $\cdots$, 则无论怎么分裂和不变, 考虑初始虫子数之和和监狱外所有数之和.

#### 例 11

 一个 $4 \times 100$ 的棋盘的左上角的格子中有一只国际象棋的马, 问: 这只马能把这个棋盘的所有格不重不漏地走一遍, 并回到左上角么?

\figurehere

> 记 1 行 1 列格为 A,1 行 2 列格为 B.
>
> (1) 间隔染色, A 染黑, 则 B 为白, AB 异色, 从 A 到 B 奇数步;
>
> (2) 一四行染黑, 二三行染白, 则黑马必跳入白格, 由于黑白格相等, 最后要回到出发点, 所以白马必须被迫跳入黑格; A 为黑, B 为黑, AB 同色, 从 A 到 B 偶数步;矛盾.

#### 例 12

已知 $x$ 轴下方 (不含 $x$ 轴) 的每个整点上都放有一枚棋子, 在任意一条与坐标轴平行的线上, 如果有两枚棋子 A, B 相邻, 并且 B 的另外一侧没有棋子, 则允许移动 A 到 B 的另外一侧同时把 B 吃掉. 问:

(1) 经过有限次操作, 能否使直线 $y = 3$ 上出现棋子?
(2) 经过有限次操作, 能否使直线 $y = 4$ 上出现棋子?

> 由于棋盘无限, 所以在直线上哪个位置出现棋子都是一样的. 假设要在 $y$ 轴与直线的交点上出现
>
> (1) $y = 3$ 显然可以. 由 $y = -1, y = -2$ 上 8 个点 $(-2,-1), (-1,-1),(0,-1),(1,-1),(2,-1),(0,-2),(1,-2),(2,-2)$ 可出现  $(0, 2)$; 由 $y =- 3, y = -4$ 上 8 个同样点可出现  $(0,0)$, 只需凑出个 $(0, -1)$ 即可, 很容易.
>
> (2) $y = 4$ 不行. 记 $\lambda =\dfrac {\sqrt 5-1}2$, 标 $(0, -1)$ 点为 1, 以 $y$ 轴为对称轴向左右均标公比为 $\lambda$ 的等比数列标好 $y =-1$ 后每个点乘以 $\lambda$ 为 $y =-2$, 依次类推. 这样, 从上到下、从 $y$ 轴到两边吃子导致和变小, 从下到上、从两边到 $y$ 轴吃子和不变, 故无论怎么吃子, 所有棋子标数之和不增. $x$ 轴下方所有棋子之和为 $\dfrac {\lambda+1}{(1-\lambda)^2} =\dfrac {\lambda +1}{\lambda^4}$, 在点 $(0,4)$ 处数为 $\dfrac 1{\lambda^5}$, 由于 $\dfrac {\lambda+1}{\lambda^4} =\dfrac 1{\lambda^5}$, 要想让 $y = 4$ 出现棋子, 需要把下方棋子全部移动完毕, 有限步不可能.



##  `讲义`

1. 能否用 15 个 \figurehere 和 1 个 \figurehere 覆盖 $8 \times 8$ 的棋盘? 为什么?

   \figurehere

   > 不能, 提示: 间隔染色.

2. 7 只酒杯, 刚开始时都是口朝下, 每次翻动其中的 4 只酒杯, 问: 能否翻动若干次之后使 7 只酒杯全部变成口朝上?

   > $\pm 1$ 赋值考虑乘积, 翻动一只杯子乘积变号, 翻动四只杯子不变号.

3. 将 $8 \times 8$ 的国际象棋棋盘剪去左上角的格子后, 能否被 21 个 $1 \times 3$ 的长方形覆盖? 为什么?

   > 123 多重染色, 只有去掉 $(3,3), (3,6), (6,3), (6,6)$ 才可以.
   >
   > 注意: 123 染完后只能去掉 2, 并且要求 2 的各种对称仍是 2.

4. 在 $8 \times 8$ 的国际象棋棋盘的左下角放有 1 枚棋子, 每步只能向上、向右或向左下走 1 步. 问: 这枚棋子能否走遍棋盘上的所有方格且每个方格恰好经过 1 次?

   > 不可能. 提示: 多重染色.
   >
   > \figurehere
   >
   > 按左上到右下斜对角线 123 染色, 必定 $1-2-3-1-2-3-\cdots$, 本质是在对于任何一个格子右、上、左下三格地位相同.

5. 24 个小球排成右图的形状, 现在想用一条绳子把所有小球穿在一起, 要求每穿完一个小球, 下一个只能穿与之相邻 (只有距离为 1 的两个小球才算相邻) 的小球中的一个. 问: 能否达到要求?

   > \figurehere
   >
   > 间隔染色, 黑白交替, 数目差至多为 1.

6. 在 $8 \times 8$ 的方格中染黑了 8 个互不相交的 $2 \times 2$ 的小正方形, 证明: 存在一个 $2 \times 2$ 的小正方形, 与 8 个黑正方形均无公共方格.

   > 染红 9 个 $2 \times 2$, 即第 124578 行 124578 列的格子, 8 个黑正方形交其中 8 个,另一个总不相交.
   >
   > \figurehere

7. 在平面上给定一个正六边形, 将它的每一边分成 1000 等分, 并用于平行于六边形各边的线段将分点 (包括原六边形的顶点)连接起来. 这些线段连同原来的六边形的边, 形成一个网格. 在所得的网格中选择任意三个节点, 若它们恰是某个正三角形的顶点 (正三角形的大小和位置不限), 就把这三个节点涂上颜色. 用这种方法继续给其他的三个节点染色 (同一节点只染色一次). 直到不能进行为止. 如果最后还只剩一个节点没有涂色, 证明: 这个点肯定不是原六正边形的顶点.

   > 用 $0,1,2$ 三个数把网格的结点标号, 使任何小三角形的顶点处都有这三个数, 且六边形的顶点处有数 0 或 1. 结点上所有数之和除以 3 时余数为 2. 设 $P , Q, R$ 是以结点为顶点的任意正三角形的顶点, 则 $P, Q$ 和 $R$ 上所标数字之和必能被 3 整除. 因此在任何时候, 未被涂色的结点处所标数之和除以 3 时余数为 2, 不可能是原六边形的顶点.