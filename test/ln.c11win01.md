# 抽屉原理

## `讲义`

### 抽屉原理

解决存在性的问题, 除了构造法外, 最常用的就是抽屉原理. 抽屉原理的常见形式如下:

1. 把 $n + 1$ 个物体放入 $n$ 个抽屉内, 必有一个抽屉内至少有 2 个物件.
2. 把 $m$ 个物体放入 $n$ 个抽屉内, 必有一个抽屉内至少有 $[\dfrac {m-1}n ]-1$ 个物件.
3. 把 $m$ 个物体放入 $n$ 个抽屉内, 必有一个抽屉内至多有 $[\dfrac mn]$个物件.
4. 把无穷多个物体放入 $n$ 个抽屉内, 必有一个抽屉中有无穷多个物件.

利用抽屉原理的组合问题, 在联赛及自招考试中偶尔会出现.

在应用抽屉原理解题时, 要搞清楚三个问题: 什么是抽屉? 什么是苹果? “抽屉”、“苹果”各多少? 对大多数可以用抽屉原理解决的题目, 其突破口和难点在于主动寻求甚至凭空构造抽屉. 而究竟如何寻求和构造抽屉, 则并没有统一的办法. 往往需要对具体问题作具体分析.

下面的一些例题讲解了常见的抽屉类型: 数对抽屉 (或数组抽屉) 、图形抽屉和区间抽屉.

#### 例 1

平面内有 $n ( n \ge 4 )$ 个不同的点, 每两点间连一线段, 已知这些线段中恰有 $n + 1$ 条长度为 $d$ 的线段. 证明: 其中必有一点, 从它出发的线段中至少有 $3$ 条等于 $d$ 的线段.

> 假设从任何一点出发的线段最多有 2 条等于 $d$ 的线段.
>
> 设 $k_i$ 是第 $i$ 个点出发的长度为 $d$ 的线段的个数, 则$k_1 + k_2 + \cdots +k_n \le 2n$.
>
> 而又 $k_1+k_2 + \cdots +k_n = 2(n +1) > 2n$, 矛盾.
>
> 故其中必有一点, 从它出发的线段中至少有 $3$ 条等于 $d$ 的线段.

#### 例 2

从 $1, 2, 3,\cdots, 100$ 这些数中取出若干个数, 使其中任意两个数的和都不能被 7 整除, 最多能取出多少个数?

>模 7 考虑, 在 100 个数中, 模 1, 模 2, 模 3, 模 0, 模 -1, 模 -2, 模 -3 的剩余系中分别有 15, 15, 14, 14, 14, 14, 14个数. 故最多选模 1, 模 2, 模 3 中所有的数以及模 0 中的一个数, 即共 $15+15+14+1=45$ 个数.

#### 例 3 `2012 北约`

从 $1, 2, 3,\cdots, 2012$ 中取一组数, 使得任意两数之和不能被其差整除, 最多能取多少个数?

>构造数组抽屉: $(1, 2, 3), (4, 5, 6), \cdots , (2008, 2009, 2010), (2011, 2012)$ 共 671 个抽屉.
>
>每个抽屉中至多选一个. 而且 671 个数不难选出来.

#### 例 4

(1) 从 $1, 2, 3, \cdots ,2014$ 中, 最多能取出多少个数, 使这些取出的数中, 每一个数都不是另一个数的 5 倍?
(2) 已知 $n , m$ 是大于 1 的正整数. 从 $1, 2, \cdots,n$ 中, 最多能取出多少个数, 使这些取出的数中, 每一个数都不是另一个数的 $m$ 倍?

> (1) 构造集合: $\{1,2,3\}, \{4,5,\cdots, 16\}, \{17,18,\cdots,80\}, \{81,82,\cdots, 402\}, \{403, 404,\cdots, 2014\}$,
>
> 每个集合分别有 $3, 13, 64, 322, 1612$ 个数, 相邻集合中, 存在一个数是另一个数的 5 倍的情况, 
>
> 故可选出 $3+64+1612 =1679$ 个数.
>
> (2) $[\dfrac n {m^0}]-[\dfrac n {m^1}]+[\dfrac n {m^2}]-[\dfrac n{m^3}]+\cdots$.

#### 例 5

在不超过 100 的正整数中任取 55 个不同的数, 问在这 55 个数中:

(1) 是否一定有两个数的差为 11?
(2) 是否一定有两个数的差为 9?

> (1) 否. 构造抽屉 $(1,12), \cdots, (11,22)$; $(23,34), \cdots, (33,44)$; $(45,55), \cdots, (54,66)$; $(67,78), \cdots, (77,88)$; $(89,100), (90), (91), \cdots, (99)$. 在这 55 个抽屉中每个选一个数, 即可获得一组任意两数之差都不为 11 的数.
>
> (2) 是. 构造抽屉 $(1,10), \cdots, (9,18)$; $(19,28), \cdots, (27,36)$;  $\cdots$; $(73,82), \cdots, (81,90)$; $(91,100), (92), (93), \cdots, (99)$. 总共只有 54 个抽屉, 故选取的 55 个数中必然存在两个数差为 9.

#### 例 6 `2013 北约`

最多存在多少个不同的正整数, 其中任意三个数的和都是质数?

>$1, 3, 7, 9$; $1, 5, 7, 11$ 等. 最多四个.
>
>如果存在 5 个这样的正整数, 模 3 考虑. 
>
>若这 5 个数构成模 3 的完全剩余系, 则在每个剩余类中分别选一个数, 和是 3 的倍数, 矛盾; 
>
>若这 5 个数不能构成模 3 的完全剩余系, 则由抽屉原理 (剩余系是 “抽屉”, 5 个数是 “苹果”), 必存在三个正整数在同一剩余类中, 这三个数的和仍是 3.

#### 例 7

设 $a_1, a_2, \cdots, a_{2014}$ 是 $1, 2 ,\cdots, 2014$ 的一个排列, 求证: $a_1 , a_2 ,\cdots, a_{2014}$ 中存在连续若干项, 其和是 2015 的倍数.

>

#### 例 8

求证: 斐波那契数列模 10 在若干项之后是周期数列.

>

#### 例 9

设给定的 8 个整数 $a_1, a_2, \cdots, a_8$ 满足 $1 \le a_1 < a_2 <\cdots  < a_8 \le 21$. 求证: 存在 $a_i , a_j , a_k , a_m (i < j < k <m)$, 满足 $a_i + a_m = a_j + a_k$.

>考虑 $a_i - a_j$ 共 28 个, 它们取 1 到 20 之间的整数, 其中至少有 8 对分别相等.
>
>若 8 对差中每一对 4 个数有两个相同, 则只可能是 8 对 $a_i + a_j = 2a_k$.
>
>这 8 个 $a_k$ 中 $k$ 不能取 $1,8$, 所以必有两个 $a_k$ 相等, 于是 $a_i^{(1)} + a_j^{(1)} = 2a_k^{(1)} = 2a_k^{(2)} = a_i^{(2)}+a_j^{(2)}$.

#### 例 10

设 $n \ge 4$, $a_1, a_2, \cdots, a_n$ 是开区间  $(0,2n)$ 内互不相同的整数.

证明: 存在 $\{a_1, a_2, \cdots, a_n\}$ 的一个子集, 它所有的元素之和能被 $2n$ 整除.

>若 $n \not\in \{a_1, a_2, \cdots, a_n\}$, 考虑 $a_1, a_2, \cdots, a_n, 2n - a_1, 2n - a_2, \cdots, 2n - a_n$, 其中必有两数相等;
>
>若 $n \in \{a_1, a_2, \cdots, a_n\}$, 设 $a_n =n$, 考虑 $a_1, a_2, a_1+a_2, a_1+a_2+a_3, \cdots, a_1+ a_2 + \cdots + a_{n-1}$ 这 $n$ 个数, 若他们模 $n$ 两两不同余, 则有一个数为 $kn$, $kn$ 与 $kn+ a_n$ 必有一个能被 2n 整除; 若有两个同余, 作差即可(可以选取 $a_1 , a_2$ 使得 $a_1 - a_2$ 不是 n 的倍数).

#### 例 11 `2007 西部第四题`

设 $O$ 是 $\triangle ABC$ 内部一点. 证明: 存在正整数 $p,q,r$, 使得 $|pOA + qOB + rOC|< \dfrac 1{2007}$.

> 引理: 设 $a, b \in \mathbb R^+$ , $\forall N > \max \{ \dfrac 1a, \dfrac 1b\}$, 则 $\exists p_1, p_2, q \in \mathbb Z^*$, 使得 $1\le q \le N$, 且 $|qa - p_1| < \dfrac 1N, |qb - p_2| <\dfrac 1N$ 同时成立.
>
> 考虑 $N^2+1$ 个点 $(\{ia\}, \{ib\})$, 由抽屉原理知存在 $i, j(0<j<i\le N^2)$ 在同一格,  令 $q = i - j$, $p_1= [ia] - [ja]$, $p_2 = [ib]-[jb]$, 设 $aOA + bOB + OC = 0$ 由引理得不等式成立.



## `作业`

1. 在不超过 2014 的正整数中最多可以取多少个数, 这些取出的数中任意三个不同的数 $a , b , c$, 满足 $a + b \not = c$?

   > 1008.
   >
   > 若所取的数中最大数是 $k$, 则由抽屉 $(1, k - 1), (2, k - 2), \cdots$, 知所取的数的个数不超过 $\dfrac k2+1$.
   >
   > 所以最多可取 1008 个数. 而 $1007,1008,1009,\cdots,2014$ 是满足条件的.

2. 在不超过 2014 的正整数中最少需要取多少个数, 可以保证在这些取出的数中一定有两个数的差为 7?

   > 52.

3. `2007 一试 06` 已知 $A$ 与 $B$ 是集合 $\{1,2,3, \cdots,100\}$ 的两个子集, 满足: $A$ 与 $B$ 的元素个数相同, 且$A\cap B$ 为空集, 若 $n \in A$ 时总有 $2n + 2 \in B$, 则集合 $A\cup B$ 的元素个数最多是多少?

   > 66.
   >
   > 构造抽屉 $(1,4), (3,8), \cdots, (23,48)$; $(2,6), (10,22), (14,30), (18,38)$; $(25), (27), \cdots, (49)$; $(26), (34), (42), (46)$. 

4. `1990 日本` 设 $a_0, a_1,\cdots , a_n$ 是 $n+1$ 个正整数 $(n>3)$, 满足: $a_0 < a_1 <\cdots a_n\le 2n-3$, 证明: 存在不同的正整数 $i, j, k , l, m \in \{1,2,\cdots ,n\}$, 使 $a_i + a_j = a_k + a_l = a_m$.

   > 分析: 不妨取 $m=n$, 要证等式转化为 $a_i = a_n - a_j, a_k = a_n - a_l$.
   >
   > 故只需考虑差 $b_i = a_n - a_i(i = 0,1, 2,\cdots , n - 1)$, 于是问题化为 $b_0,\cdots ,b_{n-1}$ 中有两个数 $b_j, b_l$ 分别与 $a_0, a_1,\cdots ,a_n$ 中两个数 $a_i, a_k$ 相等且 $i \ne j, k \ne l$.
   >
   > 证明: $1\le a_0 < a_1 < \cdots < a_n \le 2n - 3$, $1\le b_{n - 1} < b_{n-2} <\cdots < b_0 \le 2n - 4$ 共 $2n+1$ 个数, 其中至多有一个是 $a_n$ 的一半, 剩下 $2n$ 个数在 $2n-3$ 中, 抽屉一次, 取两个. 之后再抽屉一次, 再取两个, 所取的两组符合.


